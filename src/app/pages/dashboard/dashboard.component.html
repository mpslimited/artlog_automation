<div class="main-panel">
  <div class="content-wrapper">
    <div class="row mt-5">
      <div class="col-12">
        <ul class="nav nav-tabs border-bottom-0">
          <li class="nav-item">
            <a class="nav-link " [routerLinkActive]="['active', '']" [routerLink]="['/pages/admin/home']">Active Jobs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " [routerLinkActive]="['active', '']" [routerLink]="['/pages/admin/approved']">Approved Jobs</a>
          </li>
          <li class="nav-item" *ngIf="auth.roleName == 'Art Designer'">
            <a class="nav-link" [routerLinkActive]="['active', '']" [routerLink]="['/pages/admin/artdashboard']">Art Dashboard</a>
          </li>
          <li class="nav-item" *ngIf="auth.roleName == 'Art Designer'">
            <a class="nav-link" [routerLinkActive]="['active', '']" [routerLink]="['/pages/admin/dashboard']">Art Productivity</a>
          </li>
          <li class="nav-item" *ngIf="auth.roleName == 'Art Designer'">
            <a class="nav-link" [routerLinkActive]="['active', '']" [routerLink]="['/pages/admin/scorecardview']">Scorecard View</a>
          </li>
          <li class="nav-item" *ngIf="auth.roleName == 'Art Designer'">
            <a class="nav-link" [routerLinkActive]="['active', '']" [routerLink]="['/pages/admin/performance']">API Performance</a>
          </li>
          <!-- <li class="nav-item" *ngIf="auth.roleName == 'Art Designer'">
            <a class="nav-link" [routerLinkActive]="['active', '']" [routerLink]="['/pages/admin/scorecardview']">Recent Log</a>
          </li>-->
          <li class="nav-item" *ngIf="auth.roleName == 'Digital Asset Lead'">
            <a class="nav-link " [routerLinkActive]="['active', '']" [routerLink]="['/pages/admin/jobrefres']">Job Refresh</a>
          </li>
        </ul>
      </div>
    </div>
    <form #baseForm="ngForm" class="form-horizontal" (submit)="filterData()">
    <div class="row">
      <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-header">
              <div class="d-flex align-items-start">
                  <div class="p-0 mr-auto" >
                      <h6 style="cursor: pointer;" (click)="criteria=(criteria!=true)" data-toggle="collapse" href="#collapseSearch">Search Filter
                          <i [ngClass]="{' fa-angle-right': !criteria, ' fa-angle-down': criteria  }" class="fa " ></i>
                        </h6>
                  </div>
                  <div>
                      <a  (click)="viewSavedSearchList()"><small role="button">Saved Search List</small></a>
                  </div>
              </div>
          </div>
          <div class="card-body panel-collapse collapse" id="collapseSearch" >
            <div class=" row ">
              <div class="col-md-3">
                <div class="form-group">
                  <label for="formGroupExampleInput2" class="col-sm-12 pl-0">Grade</label>
                  <p-multiSelect [options]="Gdata" [(ngModel)]="frmdt.grade" name="grade" optionLabel="value"
                      selectedItemsLabel="{0} selected" [style]="{minWidth: '100%'}"
                      defaultLabel="Choose Grade" name="grade">
                  </p-multiSelect>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label for="formGroupExampleInput2" class="col-sm-12 pl-0">Module</label>
                  <p-multiSelect [options]="Mdata" [(ngModel)]="frmdt.module" optionLabel="value"
                      selectedItemsLabel="{0} selected" [style]="{minWidth: '100%'}"
                      defaultLabel="Choose Module" name="module">
                  </p-multiSelect>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label for="formGroupExampleInput2">Batch</label>
                  <input type="text" name="batch" pInputText [(ngModel)]="artLogModel.batch.value" placeholder="Batch"
                    class="batch form-control form-control-sm"  />
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label for="workflow" class="col-sm-12 pl-0">Workflow </label>
                  <p-dropdown [options]="workflows" [(ngModel)]="artLogModel.workflow.value"
                      id="workflow" name="workflow" [style]="{minWidth: '100%'}"
                      placeholder="Choose Workflow" name="workflow">
                  </p-dropdown>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-3">
                <div class="form-group">
                  <label for="curriculum" class="col-sm-12 pl-0">Curriculum</label>
                  <p-dropdown [options]="wip" [(ngModel)]="artLogModel.curricula.value"
                      name="curriculum" id="curriculum" [style]="{minWidth: '100%'}"
                      placeholder="Choose Curriculum">
                  </p-dropdown>
                </div>
              </div>
             <!-- <div class="col-md-3">
                <div class="form-group">
                  <label for="formGroupExampleInput2" class="col-sm-12 pl-0">Completion Status </label>
                  <p-multiSelect [options]="jobStatus" [(ngModel)]="frmdt.status" optionLabel="header"
                      selectedItemsLabel="{0} selected" [style]="{minWidth: '100%'}"
                      defaultLabel="Choose Status" name="status">
                  </p-multiSelect >
                </div>
              </div>-->
              <div class="col-md-3">
                  <div class="form-group">
                      <label for="formGroupExampleInput2" class="col-sm-12 pl-0">Job Type </label>
                      <p-dropdown [options]="jobsTypes" [(ngModel)]="artLogModel.added.value"
                          [style]="{minWidth: '100%'}"
                          defaultLabel="Choose Type" name="job_type">
                      </p-dropdown >
                    </div>
                </div>
                <div class="col-md-12 text-right">
                  <button type="button" (click)="clearData()" class="btn btn-danger btn-sm mr-1">Reset</button>
                  <button type="submit" class="btn btn-primary btn-sm mr-1">Search</button>
                  <button type="button" *ngIf="isSaveSearch" (click)="saveSearchDialog()" class="btn btn-primary btn-sm">Save Search</button>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
    <div class="row">
      <div class="col-lg-12">
        <!--   [lazy]="true" (onLazyLoad)="lazyLoadEnv($event)"-->
          <p-table #dt editMode="row" dataKey="_id" [value]="cartdata" [totalRecords]='totalRecords'
          [rowsPerPageOptions]='[5,10,50,100,150]'

          selectionMode="multiple" [(selection)]="selectedRows" scrollable="isScrollable" [loading]="dataloading"
          [frozenColumns]="freezeCols" [columns]="scrollableCols" frozenWidth="170px"
          scrollHeight="600px" (onFilter)="onFilter($event, dt)" [paginator]="true" [rows]="100">
          <ng-template pTemplate="colgroup" let-columns>
            <colgroup>
                <col *ngFor="let col of columns" style="width:180px">
            </colgroup>
          </ng-template>

          <ng-template pTemplate="caption">
            <p-menubar>
                <div class="d-flex">
                    <div class="pl-1 mr-auto">
                      <!--Filter Bar-->
                      <div class="searchFilterBar">
                          <a href="javascript:void(0)" pTooltip="JobKey:{{g.job_key}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('job_key') && g.job_key!=''">
                            <i class="fa fa-filter"></i> {{g.job_key}} <i class="fa fa-times-circle" style="font-size:14px" (click)="cleargInputFilter(dt,'job_key')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Job Name: {{g.name}}" tooltipPosition="top"  class="badge badge-light" *ngIf="g.hasOwnProperty('name') && g.name!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"> {{g.name}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'name')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Flagged: {{g.flagedTeam}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('flagedTeam') && g.flagedTeam!=''">
                            <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Flagged</strong>: {{g.flagedTeam}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'flagedTeam')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Math Auditors: {{g.mathAuditor}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('mathAuditor') && g.mathAuditor!=''">
                            <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Math Auditor</strong>: {{g.mathAuditor}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'mathAuditor')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Grade: {{g.grade}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('grade') && g.grade!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Grade</strong>: {{g.grade}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'grade')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Module: {{g.module}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('module') && g.module!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Module</strong>: {{g.module}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'module')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Component: {{g.component}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('component') && g.component!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Component</strong>: {{g.component}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'component')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Lesson: {{g.lesson}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('lesson') && g.lesson!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Lesson</strong>: {{g.lesson}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'lesson')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Lesson Letter: {{g.lessonlet}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('lessonlet') && g.lessonlet!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Lesson Letter</strong>: {{g.lessonlet}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'lessonlet')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Batch: {{g.lessonlet}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('batch') && g.batch!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Batch</strong>: {{g.batch}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'batch')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Desc: {{g.description}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('description') && g.description!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Desc</strong>: {{g.description}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'description')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="CR.Stage: {{g.cstage}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('cstage') && g.cstage!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Cr.Stage</strong>: {{g.cstage}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'cstage')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Status: {{g.status}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('status') && g.status!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Status</strong>: {{g.status}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'status')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="R.Team: {{g.currentRTeam}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('currentRTeam') && g.currentRTeam!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>R.Team</strong>: {{g.currentRTeam}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'currentRTeam')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Curriculum: {{g.curriculum}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('curriculum') && g.curriculum!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Curriculum</strong>: {{g.curriculum}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'curriculum')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="P.Category: {{g.facing}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('facing') && g.facing!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>P.Category</strong>: {{g.facing}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'facing')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Series: {{g.series}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('series') && g.series!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Series</strong>: {{g.series}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'series')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="CreditLine: {{g.creditLine}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('creditLine') && g.creditLine!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>CreditLine</strong>: {{g.creditLine}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'creditLine')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Comment: {{g.comment}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('comment') && g.comment!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Comment</strong>: {{g.comment}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'comment')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Tags: {{g.tags}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('tags') && g.tags!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Tags</strong>: {{g.tags}} </span><i class="fa fa-times-circle"  (click)="cleargInputOtherFilter(dt,'tags')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Mverifi..: {{g.mverification}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('mverification') && g.mverification!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Mverifi..</strong>: {{g.mverification}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'mverification')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Paging: {{g.isPaging}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('isPaging') && g.isPaging!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Paging</strong>: {{g.isPaging}} </span><i class="fa fa-times-circle" (click)="cleargInputFilter(dt,'isPaging')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="R.Count: {{g.revisionC}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('revisionC') && g.revisionC!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>R.Count</strong>: {{g.revisionC}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'revisionC')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Artcomplex: {{g.artcomplex}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('artcomplex') && g.artcomplex!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Artcomplex</strong>: {{g.artcomplex}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'artcomplex')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Artassion: {{g.artassion}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('artassion') && g.artassion!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Artassion</strong>: {{g.artassion}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'artassion')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Risk: {{g.risk}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('risk') && g.risk!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Risk</strong>: {{g.risk}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'risk')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Impact: {{g.impact}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('impact') && g.impact!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Impact</strong>: {{g.impact}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'impact')"></i>
                          </a>
                          <a href="javascript:void(0)" pTooltip="Workflow: {{g.workflow}}" tooltipPosition="top" class="badge badge-light" *ngIf="g.hasOwnProperty('workflow') && g.workflow!=''">
                              <i class="fa fa-filter"></i> <span class="d-inline-block text-truncate" style="max-width: 100px;"><strong>Workflow</strong>: {{g.workflow}} </span><i class="fa fa-times-circle" (click)="cleargSelectFilter(dt,'workflow')"></i>
                          </a>
                          <a href="javascript:void(0)" class="badge badge-info" (click)="clearAllFilter(dt)" *ngIf="hasData()">
                            <i class="fa fa-times-circle"></i> Clear Filters </a>
                      <!-- {{g | json}} -->
                        </div>
                      <!--Filter Bar-->
                    </div>
                    <div class="pl-1">
                        <p class="rowCountSummary">Showing {{filteredValuesLength}} of {{cartdata?.length}} entries ( selected {{selectedRows.length}})</p>
                    </div>
                </div>
              <div class="d-flex">
                  <div class="pr-2 d-flex align-items-center mr-auto">
                      <form class="form-inline my-lg-0">
                          <div class="input-group">
                            <input type="text" [(ngModel)]="artLogModel.jobkey.value" name="jobkey" placeholder="Job Key (eg. SCI-1164)"
                              class="form-control form-control-sm">
                            <div class="input-group-append"><button (click)="searchByjobKey($event)" type="button"
                                class=" i-low btn btn-secondary btn-sm">Search</button>
                            </div>
                          </div>
                        </form>
                  </div>
              <div class="pl-2 d-none">

              </div>
              <div class="pr-2 d-flex align-items-center">
                  <button pButton type="button" class="custom-clear-btn mr-2" icon="fa fa-close" label="{{gridState.searchTitle}}" (click)="clearGridState()" *ngIf="!!gridState && gridState.hasOwnProperty('searchTitle')"></button>
                  <!-- <a (click)="clearGridState()" class="btn btn-sm btn-primary" *ngIf="!!gridState && gridState.hasOwnProperty('searchTitle')"><i class="fa fa-close"></i> {{gridState.searchTitle}}</a> -->
                  <p-multiSelect [options]="fixCol" [(ngModel)]="scrollableCols" (onChange)="updateSelection()" optionLabel="header"
                    selectedItemsLabel="{0} columns selected" defaultLabel="Choose Columns" styleClass="mr-1">
                  </p-multiSelect>
              <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Export Data
                </button>
                <div class="dropdown-menu dropdown-menu-right ml-9">
                  <!-- dt.exportCSV()-->
                  <a class="dropdown-item" (click)="exportDataAsCSV(dt)">All Data</a>
                  <a class="dropdown-item" (click)="exportDataAsCSVSelected(dt)">Selected Row(s)</a>
                </div>
              </div>
              <p-selectButton class="ml-1" [options]="modes" [(ngModel)]="selectedModes" (onChange)="optionChangeData()"></p-selectButton>
            </div>
              </div>
            </p-menubar>

          </ng-template>
          <ng-template pTemplate="header" let-columns>
            <tr>
              <!-- <th *ngFor="let col of fixCol"> {{col.header}} </th> -->
              <th *ngFor="let col of columns">
                <div *ngIf="col.field =='job_key'">
                    {{col.header}}
                </div>
                <div *ngIf="col.field !='job_key'" [pSortableColumn]="col.field">
                  {{col.header}}
                  <p-sortIcon  [field]="col.field" ariaLabel="Activate to sort"
                    ariaLabelDesc="Activate to sort in descending order"
                    ariaLabelAsc="Activate to sort in ascending order">
                  </p-sortIcon>
                </div>
              </th>
            </tr>
            <tr>
              <!-- -->
              <th *ngFor="let col of columns">
                <input *ngIf="col.field=='job_key'" [(ngModel)]="g.job_key" placeholder="Search Job Key" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" class="w-100" style="margin-bottom:1px">
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='flagedTeam'" [(ngModel)]="g.flagedTeam" [options]="flagedTeams" defaultLabel="All Teams" (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='mathAuditor'" [(ngModel)]="g.mathAuditor" [options]="mathAuditors" defaultLabel="All Auditors" (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <input *ngIf="col.field=='name'" [(ngModel)]="g.name" placeholder="Search Job Name" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" class="w-100">
                <input *ngIf="col.field=='lessonlet'" [(ngModel)]="g.lessonlet" placeholder="Lesson Letter" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" class="w-100">
                <input *ngIf="col.field=='tags'" [(ngModel)]="g.tags" placeholder="Tags" pInputText type="text" (input)="dt.filter($event.target.value, col.field, 'contains')" class="w-100">
                <input *ngIf="col.field=='comment'" [(ngModel)]="g.comment" placeholder="Comment" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" class="w-100">
                <input *ngIf="col.field=='description'" [(ngModel)]="g.description" placeholder="Description" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" class="w-100">
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='cstage'" [(ngModel)]="g.cstage" [options]="cstages" defaultLabel="All Stages" (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='job_active_stage.status'" [(ngModel)]="g.status" [options]="cstatus" defaultLabel="All Status" (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>

                <input *ngIf="col.field=='creditLine'" [(ngModel)]="g.creditLine" placeholder="" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" class="w-100">
                <!--<input *ngIf="col.field=='mverification'" [(ngModel)]="g.mverification" placeholder="" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" class="w-100">
                <input *ngIf="col.field=='isPaging'" [(ngModel)]="g.isPaging" placeholder="" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)" class="w-100">
                -->
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='mverification'" [(ngModel)]="g.mverification" [options]="verificationsDt" defaultLabel="All Verification" (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='isPaging'" [(ngModel)]="g.isPaging" [options]="pagingCol" defaultLabel="All " (onChange)="changeMfilter($event.value,dt, col.field)" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='pageNo'" [(ngModel)]="g.pageNo" [options]="pageNos" defaultLabel="All PageNo " (onChange)="changeMfilter($event.value,dt, col.field)" [style]="{minWidth: '155px'}"></p-multiSelect>

                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='lesson'" [(ngModel)]="g.lesson" [options]="lessons" defaultLabel="All Lessons" (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='component'" [(ngModel)]="g.component"  [options]="components" defaultLabel="All Components"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='module'" [(ngModel)]="g.module" [options]="modules" defaultLabel="All Modules"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='grade'" [(ngModel)]="g.grade" [options]="grades" defaultLabel="All Grades"
                  (onChange)="changeMfilter($event.value,dt, col.field)" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='batch'" [(ngModel)]="g.batch" [options]="batchs" defaultLabel="All Batches"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='topic'" [(ngModel)]="g.topic" [options]="topics" defaultLabel="All Topics"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect  maxSelectedLabels="1" *ngIf="col.field=='currentRTeam'" [(ngModel)]="g.currentRTeam" [options]="GcurrentRTeam" defaultLabel="All Team"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='curriculum'"  [(ngModel)]="g.curriculum" [options]="Gcurriculum" defaultLabel="All Curriculum"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='revisionC'" [(ngModel)]="g.revisionC" [options]="revisions" defaultLabel="All R.Count"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='printAsset'" [(ngModel)]="g.printAsset" [options]="printAssets" defaultLabel="All P.Asset"
                (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='printReady'" [(ngModel)]="g.printReady" [options]="printReadys" defaultLabel="All P.Ready"
                (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>

                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='artcomplex'" [(ngModel)]="g.artcomplex"  [options]="Gartcomplexs" defaultLabel="Art Complexity"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='artassion'" [(ngModel)]="g.artassion"  [options]="Gartassions" defaultLabel="Art Assignment"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='risk'" [(ngModel)]="g.risk"  [options]="Grisks" defaultLabel="All Risk"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='impact'" [(ngModel)]="g.impact" [options]="Gimpact" defaultLabel="All Impact"
                (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='facing'" [(ngModel)]="g.facing" [(ngModel)]="grid.facing" [options]="facings" defaultLabel="All P.Categorys"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='series'" [(ngModel)]="g.series" [options]="seriess" defaultLabel="All Series"
                  (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='workflow'" [(ngModel)]="g.workflow"  [options]="Gworkflow" defaultLabel="All Workflow"
                (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>
                <p-multiSelect maxSelectedLabels="1" *ngIf="col.field=='permissionType'" [(ngModel)]="g.permissionType"  [options]="permissionTypes" defaultLabel="All Permission"
                (onChange)="dt.filter($event.value, col.field, 'in')" [style]="{minWidth: '155px'}"></p-multiSelect>

              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-columns="columns" let-rowData let-editing="editing" let-ri="rowIndex">
            <tr [pEditableRow]="rowData" [pSelectableRow]="rowData" class=" {{isDuplicate(rowData, editing)}} {{setEditableHeight(editing)}}">
              <!-- killed
              DATA FOR EDITING
              -->
              <td *ngFor="let col of columns" class="{{ellipsisData(col)}}">

                  <ng-container *ngIf="col.field =='job_key' " > <!-- *ngSwitchCase="'job_key'"-->
                    <ng-container  *ngIf="checkEdit(col.field, rowData)">
                        <button *ngIf="!editing && !rowData.killed" pButton type="button" label="{{rowData[col.field]}}" pInitEditableRow icon="pi pi-pencil"
                        class=" btn btn-sm btn-primary " (click)="onRowEditInit(rowData, editing)"></button>

                        <button *ngIf="rowData.killed"  type="button" class="ml-1 btn btn-sm btn-secondary" (click)="reactiveJob(rowData)">
                            <i class="font12 fa fa-undo"></i> {{rowData[col.field]}}
                          </button>
                        <!-- <button *ngIf="!editing" pButton type="button" title="Kill" pInitEditableRow icon="fa fa-trash"
                        class="ml-1 btn btn-sm ui-button-danger" (click)="killJobs(rowData, editing)"></button> -->
                        <!-- <button *ngIf="!editing" pButton type="button" title="" pInitEditableRow icon="fa fa-undo"
                        class="ml-1 btn btn-sm ui-button-success" (click)="onRowEditInit(rowData, editing)"></button> -->
                    </ng-container>
                    <ng-container *ngIf="rowData.job_key==''">
                        <a *ngIf="!checkEdit(col.field, rowData)" href="https://greatminds.getbynder.com/workflow/job/view/{{rowData.jobID}}" target="_blank">
                          <sup>*</sup>
                        </a>
                    </ng-container>
                    <a *ngIf="!checkEdit(col.field, rowData)" href="https://greatminds.getbynder.com/workflow/job/view/{{rowData[col.field]}}" target="_blank">
                    {{rowData[col.field]}}
                    </a>
                    <button *ngIf="editing" pButton label="{{rowData[col.field]}}"  type="button" pSaveEditableRow icon="fa fa-check"
                      class=" btn btn-sm ui-button-success" style="margin-right: .5em" (click)="onRowEditSave(rowData)"></button>
                    <button *ngIf="editing" pButton type="button"  pCancelEditableRow icon="fa fa-times"
                      class=" btn btn-sm ui-button-danger" (click)="onRowEditCancel(rowData, ri)"></button>
                      <!-- <i class="fa fa-asterisk" aria-hidden="true"></i> -->
                      <sup *ngIf="!rowData.hasOwnProperty('duplicate') && rowData.job_key!=''">*</sup>
                      <button *ngIf="rowData.flaged && !rowData.killed"  type="button" class="ml-1 btn btn-sm1 btn-primary" (click)="clearFlag(rowData)">
                          <i class="font12 fa fa-flag"></i>
                        </button>
                  </ng-container>
                  <span *ngIf="col.field =='name' " pTooltip="{{rowData.name}}" tooltipPosition="top">
                      {{rowData[col.field]}}

                  </span>
                <ng-container *ngIf="col.field =='flagedTeam' ">
                    {{rowData[col.field]}}
                </ng-container>
                <ng-container *ngIf="col.field =='mathAuditor' ">
                  {{rowData[col.field]}}
                </ng-container>
                <ng-container *ngIf="col.field =='mathAuditRC' ">
                  {{rowData[col.field]}}
                </ng-container>
                  <p-cellEditor *ngIf="col.field =='lesson' ">
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="rowData.lesson" required>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{rowData[col.field]}}
                    </ng-template>
                  </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='component' " pTooltip="{{rowData.component}}" tooltipPosition="top">
                      <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="rowData.component" required>
                      </ng-template>
                      <ng-template pTemplate="output">
                        {{rowData[col.field]}}
                      </ng-template>
                  </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='lessonlet' ">
                      <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="rowData.lessonlet" required>
                      </ng-template>
                      <ng-template pTemplate="output">
                        {{rowData[col.field]}}
                      </ng-template>
                  </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='module' ">
                    <ng-template pTemplate="input">
                      <p-dropdown [options]="Mdata" [(ngModel)]="rowData.module" [style]="{'width':'100%'}">
                      </p-dropdown>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{rowData[col.field]}}
                    </ng-template>
                  </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='grade' ">
                    <ng-template pTemplate="input">
                      <p-dropdown [options]="Gdata" [(ngModel)]="rowData.grade" [style]="{'width':'100%'}">
                      </p-dropdown>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{rowData[col.field]}}
                    </ng-template>
                  </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='batch' ">
                      <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="rowData.batch" required>
                      </ng-template>
                      <ng-template pTemplate="output">
                        {{rowData[col.field]}}
                      </ng-template>
                  </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='topic' ">
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="rowData.topic" required>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{rowData[col.field]}}
                    </ng-template>
                </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='description' " pTooltip="{{rowData.description}}" tooltipPosition="top">
                      <ng-template pTemplate="input">
                        <textarea pInputTextarea type="text" [(ngModel)]="rowData.description" required></textarea>
                      </ng-template>
                      <ng-template pTemplate="output">
                        {{rowData[col.field]}}
                      </ng-template>
                  </p-cellEditor>
                  <span *ngIf="col.field =='creditLine' " pTooltip="{{rowData.creditLine}}" tooltipPosition="top">
                      {{rowData[col.field]}}
                  </span>
                  <ng-container *ngIf="col.field =='thumb' && !!rowData.thumb" >
                      <button pButton icon="pi pi-search " class="btn btn-sm" (click)="selectedImages($event, rowData, op)"></button>
                  </ng-container>
                  <span *ngIf="col.field =='cstage' " pTooltip="{{rowData.cstage}}" tooltipPosition="top">
                      {{rowData[col.field]}}
                  </span>
                  <ng-container *ngIf="col.field =='currentRTeam' ">
                      {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='job_active_stage.status' ">
                      <!-- {{rowData[col.field]}} -->
                      {{rowData.job_active_stage.status}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='curriculum' " >
                      {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='dateCreated' " >
                      {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='job_date_finished' " >
                      {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='totalage' " >
                     <a (click)="addGraph(rowData)"> {{ rowData[col.field] }}</a>
                  </ng-container>
                  <ng-container *ngIf="col.field =='lastage' ">
                      {{rowData[col.field]}}
                  </ng-container>
                  <p-cellEditor *ngIf="col.field =='comment' " pTooltip="{{rowData.comment}}" tooltipPosition="top">
                    <ng-template pTemplate="input">
                      <textarea pInputTextarea type="text" [(ngModel)]="rowData.comment" required></textarea>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{rowData[col.field]}}
                    </ng-template>
                  </p-cellEditor>

                  <p-cellEditor *ngIf="col.field =='tags' " pTooltip="{{rowData.tags}}" tooltipPosition="top">
                    <ng-template pTemplate="input">
                      <textarea pInputTextarea type="text" [(ngModel)]="rowData.tags" required></textarea>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{rowData[col.field]}}
                    </ng-template>
                  </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='mverification' ">
                      <ng-template pTemplate="input">
                        <p-dropdown [options]="verificationsDt" [(ngModel)]="rowData.mverification" [style]="{'width':'100%'}">
                        </p-dropdown>
                      </ng-template>
                      <ng-template pTemplate="output">
                        {{rowData[col.field]}}
                      </ng-template>
                    </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='isPaging' ">
                    <ng-template pTemplate="input">
                      <p-dropdown [options]="pagingCol" [(ngModel)]="rowData.isPaging" [style]="{'width':'100%'}">
                      </p-dropdown>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{rowData[col.field]}}
                    </ng-template>
                  </p-cellEditor>
                  <p-cellEditor *ngIf="col.field =='pageNo' ">
                      <ng-template pTemplate="input">
                          <input type="text" pInputText [(ngModel)]="rowData.pageNo"/>
                      </ng-template>
                      <ng-template pTemplate="output">
                        {{rowData[col.field]}}
                      </ng-template>
                    </p-cellEditor>

                  <ng-container *ngIf="col.field =='revisionC' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='printAsset' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='printReady' ">
                    {{rowData[col.field]}}
                  </ng-container>

                  <ng-container *ngIf="col.field =='artcomplex' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='artassion' ">
                      {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='risk' ">
                      {{rowData[col.field]}}
                  </ng-container>
                  <ng-container  *ngIf="col.field =='impact' ">
                  {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='facing' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <span *ngIf="col.field =='series' " pTooltip="{{rowData[col.field]}}" tooltipPosition="top">
                    {{rowData[col.field]}}
                  </span>
                  <ng-container *ngIf="col.field =='workflow' ">
                      {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='permissionType' ">
                      {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='batchCDate' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='receiveddate' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='mpsDueDate' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='artTeamStatus' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='artTeamPriority' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='exceptionCategory' ">
                    {{rowData[col.field]}}
                  </ng-container>
                  <ng-container *ngIf="col.field =='exception' ">
                    {{rowData[col.field]}}
                  </ng-container>
                </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage" let-columns>
              <tr>
                  <td [attr.colspan]="columns.length">
                      No records found
                  </td>
              </tr>
          </ng-template>
        </p-table>
</div>
</div>
</div>
<p-overlayPanel #op [showTransitionOptions]="'0ms'" [hideTransitionOptions]="'0ms'" [dismissable]="true" [showCloseIcon]="true">
    <img src="{{selectedData.thumb}}" *ngIf="selectedData" style="width: 250px; height: 25%;"/>
</p-overlayPanel>
  <!--Modal dialog for add new records-->

<p-dialog header="Add new record(s)" (onHide)="hideNewRecord('$event')" [(visible)]="displayDialog" [modal]="true" showEffect="fade" [responsive]="true"  [contentStyle]="{'min-height':'300px'}" [maximizable]="true" [baseZIndex]="10000" minY="70">

    <form [formGroup]="form" (ngSubmit)="submit()" #documentEditForm="ngForm">
        <!-- <p-blockUI [target]="pnl" [blocked]="blockedPanel">
            <i class="fa fa-lock fa-5x" style="position:absolute;top:25%;left:50%"></i>
        </p-blockUI> -->
      <div class="ui-g ui-fluid" >
              <div class="col-12 p-0">
                   <div class="card-body p-2" style="border:1px solid #ccc">
                    <div class="row">
                      <div class="col-12">
                          <div class="row">
                          <div class="col-2 font-weight-bold">Job Key</div>
                          <div class="col-1 font-weight-bold">Grade</div>
                          <div class="col-1 font-weight-bold">Module</div>
                          <div class="col-2 font-weight-bold">Component</div>
                          <div class="col-2 font-weight-bold">Lesson</div>
                          <div class="col-1 font-weight-bold">P.Category</div>
                          <div class="col-2 font-weight-bold">Topic</div>
                          <div class="col-1">*</div>
                          </div>
                      </div>
                    </div>
                    <div class="row" formArrayName="jobAdd">
                    <div class="col-md-12" *ngFor="let contact of contactFormGroup.controls; let i = index;">
                          <div [formGroupName]="i" class="row">
                              <div class="form-group col-md-2 pr-0">
                                  <input type="text" pInputText formControlName="jobkey" name="jobkey"/>
                                  <span class="text-danger" *ngIf="getContactsFormGroup(i).controls['jobkey'].touched && getContactsFormGroup(i).controls['jobkey'].hasError('required')">
                                    Job Key is required! </span>
                                </div>
                            <div class="form-group col-md-1 pr-0">
                                <p-dropdown formControlName="grade" [options]="addGdata" name="grade"
                                    selectedItemsLabel="{0} selected"
                                    defaultLabel="Choose Grade" >
                                </p-dropdown>
                            </div>
                            <div class="form-group col-md-1 pr-0">
                                <p-dropdown formControlName="module" [options]="addMdata"
                                    selectedItemsLabel="{0} selected"
                                    defaultLabel="Choose Grade" name="module">
                                </p-dropdown>
                            </div>
                            <div class="form-group col-md-2 pr-0">
                                <input type="text" pInputText formControlName="component" name="component"/>
                                <!-- <span class="text-danger" *ngIf="getContactsFormGroup(i).controls['component'].touched && getContactsFormGroup(i).controls['component'].hasError('required')">
                                    Component is required! </span> -->
                            </div>
                            <div class="form-group col-md-2 pr-0">
                                <input type="text" pInputText formControlName="lesson" name="lesson"/>
                                <!-- <span class="text-danger" *ngIf="getContactsFormGroup(i).controls['lesson'].touched && getContactsFormGroup(i).controls['lesson'].hasError('required')">
                                    Lesson is required! </span> -->
                            </div>
                            <div class="form-group col-md-1 pr-0">
                              <p-multiSelect formControlName="facing" [options]="facingData"
                              selectedItemsLabel="{0} selected"  defaultLabel="Select" name="facing"></p-multiSelect>

                            </div>
                            <div class="form-group col-md-2 pr-0">
                                <input type="text" pInputText formControlName="topic" name="topic"/>
                            </div>
                            <div class="form-group col-md-1 pr-0">
                              <button pButton type="button" icon="pi pi-plus"
                                class="ui-button-primary btn btn-sm" (click)="createClone(i)"></button>
                              <ng-container *ngIf="i!=0">
                                <button pButton type="button" icon="pi pi-times"
                                class="ml-1 ui-button-danger btn btn-sm" (click)="removeContact(i)"></button>
                              </ng-container>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>
              </div>
    </div>
  </form>

  <p-footer>
    <div class="ui-dialog-buttonpane ui-helper-clearfix mt-2 text-right">
        <button type="button" class="btn btn-sm" pButton icon="fa fa-plus" (click)="addContact()" label="Insert Blank Row"></button>
        <button type="button" class="ml-1 btn btn-sm" pButton icon="fa fa-check" (click)="documentEditForm.ngSubmit.emit()" label="Save"></button>
    </div>
</p-footer>

</p-dialog>
<!--Modal dialog for Saved Search-->
<p-dialog header="Save Search" [(visible)]="saveSearchModal"  [responsive]="true" showEffect="fade" [modal]="true"  [style]="{width: '30%'}">
<div class="ui-g ui-fluid">
    <div class="ui-g-12 ui-md-12">
        <div class="ui-inputgroup">
            <input type="text"  pInputText  [(ngModel)]="searchText" name="searchText" />
            <button pButton type="button" (click)="saveUserSerach('Active')" icon="pi pi-check" class="ui-button-success"></button>
        </div>
    </div>
</div>
</p-dialog>
<!--<app-custom-modal-pop-up [basicSetting]="editSetting" [template]="editPopup"></app-custom-modal-pop-up>
<ng-template #editPopup>
<app-editjob [jobdataid]="jobID">
</app-editjob>
</ng-template> -->
<!--Modal dialog for Saved Search List-->
<p-dialog header="Saved Search List" [(visible)]="savedSearchListModal" [responsive]="true" showEffect="fade" [modal]="true"  [style]="{width: '30%'}">
      <div class="ui-g ui-fluid">
          <p-table [value]="savedsearchLists">
              <ng-template pTemplate="header">
                  <tr>
                      <th>Selected</th>
                      <th>Search Name</th>
                      <th>Action</th>
                  </tr>
              </ng-template>
              <ng-template pTemplate="body" let-savedsearchList>
                  <tr >
                      <td><p-radioButton name="groupname" [value]="savedsearchList._id" [(ngModel)]="defaultSearch" (onClick)="setDefaltSearch($event)" value="val1" ></p-radioButton></td>
                      <td>{{savedsearchList.searchTitle }}</td>
                      <td><button type="button" pButton icon="fa fa-close" class="ui-button-danger btn btn-sm" (click)="deleteSearchList(savedsearchList)"></button></td>
                  </tr>
              </ng-template>
          </p-table>
        </div>
</p-dialog>
<!-- tag generation and verification-->
<p-dialog header="Automated Tag Generation & Verification" [(visible)]="tagverificationModal" [responsive]="true" showEffect="fade" [modal]="true"  [style]="{width: '90%'}" [maximizable]="true">
    <div class="ui-g ui-fluid">
        <p-table [value]="rowsmoveTags" [(selection)]="selectedTagsData">
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 3em">
                        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                    </th>
                    <th style="width: 8em">Job key</th>
                    <th style="width: 8em">Grade</th>
                    <th style="width: 8em">Module</th>
                    <th style="width: 8em">Components</th>
                    <th style="width: 8em">Lesson</th>
                    <th style="width: 8em">Lesson Letter</th>
                    <th style="width: 8em">Batch</th>
                    <th style="width: 20em">Pre-exist Tags</th>
                    <th style="width: 20em">Generated Tags</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowsmoveTags>
                <tr > <!-- rowsmoveTags-->
                  <td>
                      <p-tableCheckbox [value]="rowsmoveTags"></p-tableCheckbox>
                  </td>
                    <td>{{rowsmoveTags.job_key}}</td>
                    <td>{{rowsmoveTags.grade}}</td>
                    <td>{{rowsmoveTags.module}}</td>
                    <td>{{rowsmoveTags.component}}</td>
                    <td>{{rowsmoveTags.lesson}}</td>
                    <td>{{rowsmoveTags.lessonlet}}</td>
                    <td>{{rowsmoveTags.batch}}</td>
                    <td>{{rowsmoveTags.tags}}</td>
                    <td> <textarea pInputTextarea type="text" [(ngModel)]="rowsmoveTags.generatedTags" ></textarea></td>
                   <!--<td></td>
                --> </tr>
            </ng-template>
        </p-table>
        <!-- <p>{{selectedTagsData| json}}</p> -->
      </div>
      <p-footer>
          <button type="button" pButton icon="fa fa-trash" class="ui-button-danger btn btn-sm" (click)="deleteMoveTagList(selectedTagsData)" label="Remove Selected Rows"></button>
          <button type="button" pButton icon="pi pi-check" class="ui-button-success btn btn-sm" (click)="confirm()" label="Push to Asset Bank"></button>
      </p-footer>
</p-dialog>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" [style]="{width: '25vw', height:'20vh'}"></p-confirmDialog>

<!--Modal dialog for bulk batch generation-->
<p-dialog header="Bulk Insert Batch" [(visible)]="bulkBatchModal" [responsive]="true" showEffect="fade" [modal]="true"  [style]="{width: '30%'}">
  <div class="ui-g ui-fluid">
      <input type="text" class="w-100" pInputText [(ngModel)]="bulkBatch"/>
    </div>
    <p-footer>
      <button type="button" pButton icon="fa fa-floppy-o" class="ui-button-success btn btn-sm" (click)="saveBatchData()" label="Save"></button>
  </p-footer>
</p-dialog>
<!--Modal dialog for bulk bulkExceptionCatModal generation-->
<p-dialog header="Bulk Insert Exception Cat" [(visible)]="bulkExceptionCatModal" [responsive]="true" showEffect="fade" [modal]="true"  [contentStyle]="{'min-height':'100px','overflow':'visible' }" [style]="{width:'30%'}" [maximizable]="false">
  <div class="ui-g ui-fluid">
     <!-- <input type="text" pInputText [(ngModel)]="bulkExceptionCat"/>-->
     <p-dropdown  class="ml-1" [options]="excCat" [(ngModel)]="bulkExceptionCat" ></p-dropdown >
    </div>
    <p-footer>
      <button type="button" pButton icon="fa fa-floppy-o" class="ui-button-success btn btn-sm" (click)="savebulkExceptionCat()" label="Save"></button>
  </p-footer>
</p-dialog>
<!--Modal dialog for bulk bulkExceptionModal generation-->
<p-dialog header="Bulk Insert Exception" [(visible)]="bulkExceptionModal" [responsive]="true" showEffect="fade" [modal]="true"  [style]="{width: '30%'}">
  <div class="ui-g ui-fluid">
      <input type="text" class="w-100" pInputText [(ngModel)]="bulkException"/>
    </div>
    <p-footer>
      <button type="button" pButton icon="fa fa-floppy-o" class="ui-button-success btn btn-sm" (click)="savebulkException()" label="Save"></button>
  </p-footer>
</p-dialog>
<!--Modal dialog for bulk bulkBatchCDateModal generation-->
<p-dialog header="Bulk Batch Complation Date " [(visible)]="bulkBatchCDateModal" [responsive]="true" showEffect="fade" [modal]="true"  [style]="{width: '30%'}">
  <div class="ui-g ui-fluid">
    <span class="">Formate : MM-DD-YYYY</span>
      <input type="text" pInputText [(ngModel)]="bulkBatchCDate" placeholder="MM-DD-YYYY"/>
    </div>
    <p-footer>
      <button type="button" pButton icon="fa fa-floppy-o" class="ui-button-success btn btn-sm" (click)="savebulkBatchCDate()" label="Save"></button>
  </p-footer>
</p-dialog>

<!--Modal dialog for Flagged Row generation-->
<p-dialog header="Row Flagging" [(visible)]="rowFlaggedModal" [responsive]="true" showEffect="fade" [modal]="true"  [contentStyle]="{'min-height':'100px','overflow':'visible' }" [style]="{width: '30%'}">
  <div class="ui-g ui-fluid">
      <div class="form-group w-100">
          <label for="email">Flagged for Team:</label>
      <p-dropdown [options]="teamsGrpup" [(ngModel)]="flaggedTeam"></p-dropdown>
      </div>
      <div class="form-group w-100">
          <label for="Comment">Comment:</label>
      <textarea pInputTextarea id="Comment" [(ngModel)]="flaggedComment"></textarea>
      </div>
    </div>
    <p-footer>
     <button type="button" pButton icon="fa fa-floppy-o" class="ui-button-success btn btn-sm" (click)="saveFlagged()" label="Save"></button>
  </p-footer>
</p-dialog>

<!--Modal dialog for Flagged Row generation-->
<p-dialog header="Assign Math Auditor" [(visible)]="assignMathAuditModal" [responsive]="true" showEffect="fade" [modal]="true"  [contentStyle]="{'min-height':'100px','overflow':'visible' }" [style]="{width: '30%'}">
  <div class="ui-g ui-fluid">
      <div class="form-group w-100">
          <label for="email">Math Auditor:</label>
      <p-dropdown [options]="MathAuditors" optionLabel="name" [(ngModel)]="assignAuthor"></p-dropdown>
      </div>
    </div>
    <p-footer>
     <button type="button" pButton icon="fa fa-floppy-o" class="ui-button-success btn btn-sm" (click)="assignAuditors()" label="Save"></button>
  </p-footer>
</p-dialog>

<!--Modal dialog for bulk tag generation-->
<p-dialog header="Bulk Insert Tags" [(visible)]="bulkTagModal" [responsive]="true" showEffect="fade" [modal]="true"  [style]="{width: '30%'}">
  <div class="ui-g ui-fluid">
      <input type="text" pInputText [(ngModel)]="bulkTags"/>
    </div>
    <p-footer>
      <button type="button" pButton icon="fa fa-floppy-o" class="ui-button-success btn btn-sm" (click)="saveTagData()" label="Save"></button>
  </p-footer>
</p-dialog>
<!--Modal dialog for bulk data verification-->
<p-dialog header="Manuscript Verification & Paging Approval" [(visible)]="bulkDataVerifyModal" [responsive]="true" showEffect="fade" [modal]="true"  [contentStyle]="{'min-height':'100px','overflow':'visible' }" [style]="{width: '70%'}" [maximizable]="true">
<div class="ui-g ui-fluid">
  <p-table [value]="bulkVerificationData" [(selection)]="selectedVerifyData">
    <ng-template  pTemplate="header"  >
    
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th  colspan="3" ></th>
        <th><p-dropdown [options]="verificationsDt" 
          [(ngModel)]="verifi.mverification" [style]="{'width':'100%'}"></p-dropdown></th>
        <th><p-dropdown [options]="pagingCol" [(ngModel)]="verifi.isPaging" [style]="{'width':'100%'}">
        </p-dropdown></th>
        <th><input pInputText class="form-control form-control-sm" [(ngModel)]="verifi.pageNo" placeholder="Page No">
        </th>
    </tr>
          <tr>
              <th style="width: 3em">
                  <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              Job key</th>
              <th style="width: 5em">Grade</th>
              <th style="width: 5em">Module</th>
              <th style="width: 8em">M. Verification</th>
              <th style="width: 8em">Paging Approved</th>
              <th style="width: 8em">Paging No 
                <span class="pl-4 float-right" style="position: relative;  top: -2px; ">
                  <input [(ngModel)]="verifi.isBlank" class="form-check-input ng-valid ng-dirty ng-touched" type="checkbox">
                  <label class="form-check-label" for="defaultCheck1">Blank</label>
                </span>
              </th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-bulkVerificationData>
          <tr > <!-- rowsmoveTags-->
            <td>
                <p-tableCheckbox [value]="bulkVerificationData"></p-tableCheckbox>
            {{bulkVerificationData.job_key}}</td>
              <td>{{bulkVerificationData.grade}}</td>
              <td>{{bulkVerificationData.module}}</td>
              <td><p-dropdown [options]="verificationsDt" [(ngModel)]="bulkVerificationData.mverification" [style]="{'width':'100%'}"></p-dropdown></td>
              <td><p-dropdown [options]="pagingCol" [(ngModel)]="bulkVerificationData.isPaging" [style]="{'width':'100%'}">
                </p-dropdown></td>
              <td><input pInputText class="form-control form-control-sm" [(ngModel)]="bulkVerificationData.pageNo" placeholder="Page No"></td>
       </tr>
      </ng-template>
  </p-table>
  <!-- <p>{{selectedTagsData| json}}</p> -->
</div>
<p-footer>
  <button type="button" pButton icon="pi pi-check" class="ui-button-success btn btn-sm" (click)="applyVerification()" label="Apply"></button>
    <button type="button" pButton icon="pi pi-check" class="ui-button-success btn btn-sm" (click)="saveVerifiedData()" label="Submit"></button>
</p-footer>
</p-dialog>
<!--Modal dialog for time duration graph-->
<p-dialog header="Stage Duration Graph" [(visible)]="stageDurationGraph" [responsive]="true" showEffect="fade" [modal]="true"  [contentStyle]="{'min-height':'100px','overflow':'visible' }" [style]="{width: '70%'}" [maximizable]="true">
<div class="ui-g ui-fluid">
  <div class="col-12">
  <apx-chart  #chart [series]="apex.series" [xaxis]="apex.xaxis"
  [plotOptions]="apex.plotOptions" [chart]="apex.chart"
  [dataLabels]="apex.dataLabels" [autoUpdateSeries]="false"></apx-chart>
</div>
      <!-- <google-chart #chart
       [type]="type"
           [data]="chartDisplayData"

   [options]="options"
   [width]="width"
   [height]="height">
</google-chart>-->
  <p> <!--Here is graph code  : type="BarChart" <google-chart [data]="myData"></google-chart> {{selectedTagsData| json}}--></p>
</div>
<p-footer>
   <!-- <button type="button" pButton icon="pi pi-check" class="ui-button-success btn btn-sm" (click)="saveVerifiedData()" label="Submit"></button>
--></p-footer>
</p-dialog>
